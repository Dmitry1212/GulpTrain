function renderGoodsList(){$("#goods").empty(),$.get("http://localhost:3000/goods",{},function(t){var a=$("<ul />");t.forEach(function(t){a.append($("<li />",{text:t.name+" "+t.price+" rub."}).append($("<button />",{text:"Buy","data-id":t.id,"data-price":t.price,"data-name":t.name})))}),$("#goods").append(a)},"json")}function renderCart(){$("#cart").empty(),$.get("http://localhost:3000/cart",{},function(t){var a=$("<ul />"),e=0;t.forEach(function(t){a.append($("<li />",{text:t.name+" ("+t.quantity+")"}).append($("<button />",{text:"Remove",class:"remove","data-id":t.id,"data-price":t.price,"data-name":t.name,"data-quantity":t.quantity})).append($("<button />",{text:"-1",class:"minus"}))),e+=+t.quantity*+t.price}),$("#cart").append(a),$("#cart").append($("<div />",{text:"Total: "+e+" rub."}))},"json")}function renderFeadbackList(){$("#feadbacks").empty(),$.get(" http://localhost:3000/comments",{},function(t){t.forEach(function(t){JSON.parse(t.accepted)?$color="accepted":$color="moderate";var a=$("<form />");a.append($("<div />",{class:$color+" status"}),$("<input />",{type:"text",name:t.idComment,class:"info",value:t.text,"data-id":t.id,"data-accepted":t.accepted}),$("<input />",{type:"submit",value:"Одобрить",class:"submit"}),$("<input />",{type:"submit",value:"Удалить",class:"delete"})),$("#feadbacks").append(a)})},"json")}!function(t){t(document).ready(function(){t(".slider").bxSlider(),renderGoodsList(),renderCart(),t("#cart").on("click","li button.remove",function(a){t.ajax({type:"DELETE",url:"http://localhost:3000/cart/"+t(this).attr("data-id"),success:function(){renderCart()}})}),t("#cart").on("click","li button.minus",function(a){var e=t(this).prev();"1"!==e.attr("data-quantity")?t.ajax({type:"PATCH",url:"http://localhost:3000/cart/"+e.attr("data-id"),data:{quantity:+e.attr("data-quantity")-1},success:function(){renderCart()}}):t.ajax({type:"DELETE",url:"http://localhost:3000/cart/"+e.attr("data-id"),success:function(){renderCart()}})}),t("#goods").on("click","li button",function(a){var e={id:t(this).attr("data-id"),price:t(this).attr("data-price"),name:t(this).attr("data-name"),quantity:1};if(t('#cart li button[data-id="'+e.id+'"]').length){var n=t('#cart li button[data-id="'+e.id+'"]');t.ajax({type:"PATCH",url:"http://localhost:3000/cart/"+e.id,data:{quantity:+n.attr("data-quantity")+1},success:function(){renderCart()}})}else t.ajax({type:"POST",url:"http://localhost:3000/cart",data:e,success:function(){renderCart()}});a.preventDefault()})})}(jQuery),function(t){t(document).ready(function(){renderFeadbackList(),t("#feadbacks").on("click","input.submit",function(a){"false"==t(this).prev().attr("data-accepted")&&t.ajax({type:"PATCH",url:" http://localhost:3000/comments/"+t(this).prev().attr("data-id"),data:{accepted:!0},success:function(){renderFeadbackList()}}),a.preventDefault()}),t("#feadbacks").on("click","input.delete",function(a){t.ajax({type:"DELETE",url:"http://localhost:3000/comments/"+t(this).prev().prev().attr("data-id"),success:function(){renderFeadbackList()}}),a.preventDefault()}),t("#getComment").on("click","input#sendComment",function(a){t.get(" http://localhost:3000/comments",{},function(a){var e=a.length;console.log(e);var n=[];for(a.forEach(function(t){t.id=JSON.parse(t.id),n.push(t.id)});-1!==n.indexOf(e);)e++;var c={id:JSON.stringify(e),text:t("textarea").val(),accepted:JSON.stringify(!1)};t.ajax({type:"POST",url:"http://localhost:3000/comments",data:c,success:function(){renderFeadbackList()}})},"json"),a.preventDefault()})})}(jQuery);